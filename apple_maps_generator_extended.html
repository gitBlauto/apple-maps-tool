
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Apple Maps Link Generator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        label, input, button { display: block; margin: 10px 0; }
        input { width: 400px; padding: 5px; }
        #link { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <h2>Apple Maps Link Generator</h2>
    <label for="coords">Koordinaten eingeben (z.B. 51.269372,13.697632 oder 51°16.1623'N, 13°41.8579'E):</label>
    <input type="text" id="coords" placeholder="Koordinaten">
    <button onclick="generateLink()">Link erzeugen</button>
    <div id="link"></div>

    <script>
        function parseCoordinate(coord) {
            coord = coord.trim();
            if (coord.includes("°") && coord.includes("'")) {
                // DDM Format: 51°16.1623'N
                let match = coord.match(/(\d+)°(\d+\.\d+)'([NSEW])/);
                if (match) {
                    let deg = parseFloat(match[1]);
                    let min = parseFloat(match[2]);
                    let dir = match[3];
                    let dec = deg + min / 60;
                    if (dir === 'S' || dir === 'W') dec *= -1;
                    return dec;
                }
            } else if (coord.includes("°") && coord.includes("′") && coord.includes("″")) {
                // DMS Format: 51°16′09.74″N
                let match = coord.match(/(\d+)°(\d+)′(\d+\.\d+)″([NSEW])/);
                if (match) {
                    let deg = parseFloat(match[1]);
                    let min = parseFloat(match[2]);
                    let sec = parseFloat(match[3]);
                    let dir = match[4];
                    let dec = deg + min / 60 + sec / 3600;
                    if (dir === 'S' || dir === 'W') dec *= -1;
                    return dec;
                }
            } else {
                // Decimal Format
                return parseFloat(coord.replace(',', '.'));
            }
            return null;
        }

        function generateLink() {
            const input = document.getElementById("coords").value.trim();
            let parts = input.split(/[,;]/);
            if (parts.length !== 2) {
                alert("Bitte geben Sie die Koordinaten im Format 'Breite,Länge' ein.");
                return;
            }
            let lat = parseCoordinate(parts[0]);
            let lon = parseCoordinate(parts[1]);
            if (isNaN(lat) || isNaN(lon)) {
                alert("Ungültiges Koordinatenformat.");
                return;
            }
            const url = `https://maps.apple.com/?ll=${lat.toFixed(6)},${lon.toFixed(6)}`;
            document.getElementById("link").innerHTML = `<a href="${url}" target="_blank">Apple Maps öffnen</a>`;
        }
    </script>
</body>
</html>
